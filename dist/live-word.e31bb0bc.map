{"version":3,"sources":["index.js"],"names":["data","title","author","content","renderTitle","val","document","getElementsByClassName","innerText","renderAuthor","renderContent","vals","forEach","line","createElement","append","appendChild","audioDom","getElementById","playButton","nextButton","beforeButton","timeLeftText","timeRightText","audioReset","console","log","audioTransTime","time","Infinity","duration","parseInt","minute","sec","isM0","length","updateTime","addAudioEvent","updateProgress","currentTime","audioEnded","reset","handleError","e","errorCode","currentTarget","error","code","play","paused","pause","_addEventListener","elem","type","func","undefined","addEventListener"],"mappings":"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","file":"live-word.e31bb0bc.map","sourceRoot":"..","sourcesContent":["var data = {\r\n  title: '另一个我的一生',\r\n  author: '西川',\r\n  content: [\r\n    '我会在十二岁爱上一个小仙女',\r\n    '陪她穿过超市的小巷',\r\n    '阳光闪烁的广场',\r\n    '我会为她花光手里的钱',\r\n    '为的是吻一下',\r\n    '她善变的嘴唇',\r\n    '抱住她，像抱住',\r\n    '头顶的月亮',\r\n    '而假如她拒绝我',\r\n    '我会一点一滴地品味',\r\n    '我浪漫的迷惘'\r\n  ]\r\n}\r\n\r\nfunction renderTitle(val) {\r\n  var title = document.getElementsByClassName('title')\r\n  title[0] && (title[0].innerText = val)\r\n  document.title = val\r\n}\r\n\r\nfunction renderAuthor(val) {\r\n  var author = document.getElementsByClassName('author')\r\n  author[0] && (author[0].innerText = val)\r\n}\r\n\r\nfunction renderContent(vals) {\r\n  var content = document.getElementsByClassName('content')\r\n  content = content && content[0]\r\n  vals.forEach(function(val) {\r\n    var line = document.createElement('p')\r\n    line.innerText = val\r\n    if (content.append) {\r\n      content.append(line)\r\n    } else {\r\n      content.appendChild(line)\r\n    }\r\n  })\r\n}\r\n\r\nrenderTitle(data.title)\r\nrenderAuthor(data.author)\r\nrenderContent(data.content)\r\n\r\n// audio controls\r\nvar audioDom = document.getElementById('audio')\r\nvar playButton = document.getElementById('play')\r\nvar nextButton = document.getElementById('next')\r\nvar beforeButton = document.getElementById('before')\r\nvar timeLeftText = document.getElementById('time-left')\r\nvar timeRightText = document.getElementById('time-right')\r\n\r\nfunction audioReset() {\r\n  console.log('reset')\r\n}\r\n\r\nfunction audioTransTime(time) {\r\n  if (!time > 0) {\r\n    return ''\r\n  }\r\n  if (time === Infinity) {\r\n    return '--:--'\r\n  }\r\n  const duration = parseInt(time)\r\n  let minute = parseInt(duration / 60)\r\n  let sec = duration % 60 + ''\r\n  const isM0 = ':'\r\n  if (minute === 0) {\r\n    minute = '00'\r\n  } else if (minute < 10) {\r\n    minute = '0' + minute\r\n  }\r\n  if (sec.length === 1) {\r\n    sec = '0' + sec\r\n  }\r\n  return minute + isM0 + sec\r\n}\r\n\r\nfunction updateTime(time) {\r\n  timeLeftText && (timeLeftText.innerText = audioTransTime(time))\r\n}\r\n\r\nfunction addAudioEvent() {\r\n  // 监听音频播放时间并更新进度条\r\n  var updateProgress = function() {\r\n    if (audioDom.currentTime > 0 && audioDom.duration !== Infinity) {\r\n      // this.loadingClass = false\r\n      updateTime(audioDom.currentTime)\r\n    }\r\n  }\r\n  // 监听播放完成事件\r\n  var audioEnded = function() {\r\n    reset()\r\n  }\r\n  // 处理播放错误\r\n  var handleError = function(e) {\r\n    var errorCode = e && e.currentTarget && e.currentTarget.error.code\r\n    switch (errorCode) {\r\n      case 2:\r\n        console.log('MEDIA_ERR_NETWORK')\r\n        break\r\n      case 3:\r\n        console.log('MEDIA_ERR_DECODE')\r\n        break\r\n      case 4:\r\n        console.log('MEDIA_ERR_SRC_NOT_SUPPORTED')\r\n        break\r\n      default:\r\n        console.log('MEDIA_ERR_UNKNOWN')\r\n    }\r\n    audioEnded()\r\n  }\r\n\r\n  var play = function() {\r\n    // 执行播放/暂停\r\n    if (audioDom.paused) {\r\n      audioDom.play()\r\n    } else {\r\n      audioDom.pause()\r\n    }\r\n  }\r\n\r\n  // 是否支持 onended 监听播放完成事件\r\n  _addEventListener(audioDom, 'ended', audioEnded)\r\n  // error\r\n  _addEventListener(audioDom, 'error', handleError)\r\n  // 是否支持 ontimeupdate 监听更新事件\r\n  _addEventListener(audioDom, 'timeupdate', updateProgress)\r\n  // 点击播放\r\n  _addEventListener(playButton, 'click', play)\r\n}\r\n\r\nfunction _addEventListener(elem, type, func) {\r\n  if (elem['_is' + type]) {\r\n    return\r\n  }\r\n  if (elem['on' + type] === undefined) {\r\n    elem.addEventListener(type, func, false)\r\n  } else {\r\n    elem['on' + type] = func\r\n  }\r\n  elem['_is' + type] = true\r\n}\r\n\r\naddAudioEvent()"]}